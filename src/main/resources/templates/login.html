<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
<title th:text="#{login_jsp.title.header}"></title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script
	src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
<script
	src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</head>
<div th:replace="header.html :: navigation"></div>
<body>
	<div class="container shadow-lg p-4 mb-4 bg-white">
		<h1 th:text="#{login_jsp.button.login}"></h1>
		<br />
		<form th:action="@{/login-processing}" th:object="${user}" method="post"
			class="needs-validation" novalidate>
			<div class="form-group">
				<label for="login" th:text ="#{login_jsp.label.login}"></label><br />
				<input type="text" class="form-control" id="login"
					placeholder="Enter username" name="login" th:field="*{login}" required><br />
				<div class="valid-feedback" th:text="#{login_jsp.text.validation}"></div>
				<div class="invalid-feedback">
					<fmt:message key="Please fill out this field" />
				</div>
			</div>
			<div class="form-group">
				<label for="password" th:text="#{login_jsp.label.password}"></label><br />
				<input type="password" name="pass" class="form-control" id="pass"
					placeholder="Enter password" th:field="*{password}" required><br /> <br />
				<div class="valid-feedback" th:text="#{login_jsp.text.validation}"></div>
				<div class="invalid-feedback">
					<fmt:message key="Please fill out this field" />
				</div>
			</div>
			<button class="btn btn-primary" type="submit"
				th:text="#{login_jsp.button.login}"></button>


		</form>
		<br />
		<div class="errors-div" th:if="${error != null}">
			<div class="alert alert-danger" role="alert" th:text="${error}">
			</div>
		</div>
	</div>
	<script>
		// Disable form submissions if there are invalid fields
		(function() {
			'use strict';
			window.addEventListener('load',
					function() {
						// Get the forms we want to add validation styles to
						var forms = document
								.getElementsByClassName('needs-validation');
						// Loop over them and prevent submission
						var validation = Array.prototype.filter.call(forms,
								function(form) {
									form.addEventListener('submit', function(
											event) {
										if (form.checkValidity() === false) {
											event.preventDefault();
											event.stopPropagation();
										}
										form.classList.add('was-validated');
									}, false);
								});
					}, false);
		})();
	</script>
	<script
		src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js">
		
	</script>
	<script type="text/javascript">
		$(document).ready(
				function() {
					$("#locales").change(
							function() {
								var selectedOption = $('#locales').val();
								if (selectedOption != '') {
									window.location
											.replace('international?lang='
													+ selectedOption);
								}
							});
				});
	</script>
</body>
</html>